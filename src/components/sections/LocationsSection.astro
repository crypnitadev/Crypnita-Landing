---
import ImageComp from "../ImageComp.astro";
import Title from "../Title.astro";
import Section from "../Section.astro";

interface Location {
  title: string;
  address: string;
  mapImage: string;
  locationImage: string;
  mapUrl: string;
}

const locations: Location[] = [
  {
    title: "Bellamar - Nuevo Chimbote",
    address: "Mz. A6 Lt.17 Bellamar Segunda Etapa",
    mapImage: "/src/assets/locations/bellamar/bellamar.png",
    locationImage: "/src/assets/locations/bellamar/Bellamar - Turistic.jpeg",
    mapUrl: "https://maps.app.goo.gl/5jPDqzdALyFw4xpy5",
  },
  {
    title: "Pacifico - Nuevo Chimbote",
    address: "Urbanización Miguel Grau Mz.W2 Lt.2",
    mapImage: "/src/assets/locations/Av. Pacifico/Av. Pacifico.png",
    locationImage: "/src/assets/locations/Av. Pacifico/Pacifico - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/mBy9iD9GxwKfEjRY8",
  },
  {
    title: "Agustín Gamarra - Huaraz",
    address: "Av. Agustín Gamarra 835",
    mapImage: "/src/assets/locations/Huaraz/Huaraz - Av. Agustin.png",
    locationImage: "/src/assets/locations/Huaraz/Huaraz - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/UNmaAAiL89aycyVT8",
  },
  {
    title: "Ferreñafe",
    address: "Calle Santa Rosa Mz F Lt. 46 Urb. Los Angeles",
    mapImage: "/src/assets/locations/Ferreñafe/Ferreñafe.png",
    locationImage: "/src/assets/locations/Ferreñafe/Ferreñafe - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/JsouGvG2cXW2Ssx87",
  },
  {
    title: "La Victoria - Chiclayo",
    address: "Calle Virú, La victoria 14007",
    mapImage: "/src/assets/locations/La Victoria/La Victoria.png",
    locationImage:
      "/src/assets/locations/La Victoria/La Victoria - Turistic.png",
    mapUrl: "https://maps.app.goo.gl/bwErEh6tCcNLES9t6",
  },
  {
    title: "Morrope",
    address: "Av. Mexico N.413 ",
    mapImage: "/src/assets/locations/Morrope/Morrope.png",
    locationImage: "/src/assets/locations/Morrope/Morrope - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/818iFyVVz47qhGXn7",
  },
  {
    title: "Chao",
    address: "Av. Ayacucho Mz. 16 Lt 02",
    mapImage: "/src/assets/locations/Chao/Chao.png",
    locationImage: "/src/assets/locations/Chao/Chao - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/dFG3Hs9VGxX2nw5BA",
  },
  {
    title: "Virú",
    address: "Calle Libertad 281",
    mapImage: "/src/assets/locations/Viru/Viru.png",
    locationImage: "/src/assets/locations/Viru/Viru - Turistic.jpeg",
    mapUrl: "https://maps.app.goo.gl/BGLPrhFcLTxVn4Zy8",
  },
  {
    title: "Catacaos",
    address: "Urbanización Trujillo 902",
    mapImage: "/src/assets/locations/Catacaos/Catacaos.png",
    locationImage: "/src/assets/locations/Catacaos/Catacaos - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/VbZimuvfZSUCmFmn9",
  },
  {
    title: "Castilla",
    address: "Av. Junín No. 343, Piura",
    mapImage: "/src/assets/locations/Av. Junin/Av. Junin.png",
    locationImage: "/src/assets/locations/Av. Junin/Av. Junin - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/Jw9u3T2AGfJAiQo87",
  },
  {
    title: "Bagua - Héroes de Cenepa",
    address: "Av. Héroes de Cenepa 1178",
    mapImage: "/src/assets/locations/Bagua/Bagua.png",
    locationImage: "/src/assets/locations/Bagua/Bagua - Turistic.jpg",
    mapUrl: "https://maps.app.goo.gl/F23qSaCwFhacgvpcA",
  },
];
---

<Section id="locations">
  <Title title="Orb points" />
  <div class="relative flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 pointer-events-none"></div>
    <div class="relative w-full overflow-hidden">
      <div
        id="locationSlider"
        class="flex transition-transform duration-500 ease-in-out space-x-16 px-8"
      >
        {
          locations.map((location) => (
            <div class="w-full flex-shrink-0 text-center p-4">
              <h2 class="text-3xl font-bold mb-2">{location.title}</h2>
              <p class="mb-4 text-lg">{location.address}</p>
              <div class="grid md:grid-cols-2 gap-4">
                <a
                  href={location.mapUrl}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <div class="relative aspect-video border border-transparent rounded-xl overflow-hidden transition hover:border-white">
                    <ImageComp
                      imagePath={location.mapImage}
                      altText="Mapa"
                      width={800}
                      height={400}
                    />
                    <div class="h-15 md:h-20 flex absolute bottom-0 w-full bg-black text-white py-2 items-center justify-center transition hover:bg-opacity-75">
                      <p class="md:px-6 md:py-2 px-3 py-1 text-md bg-white/90 rounded-full text-black">Ubicación</p>
                    </div>
                  </div>
                </a>
                <div class="relative aspect-video rounded-xl overflow-hidden">
                  <ImageComp
                    imagePath={location.locationImage}
                    altText="Ubicación"
                    width={800}
                    height={400}
                  />
                </div>
              </div>
            </div>
          ))
        }
      </div>
          <!-- Navigation Buttons -->

      <button
        id="prevBtn"
        class="absolute top-1/2 left-4 -translate-y-1/2 md:left-0 bg-white/30 hover:bg-white/50 text-black text-xl md:text-2xl font-bold rounded-sm aspect-square px-2 md:px-4 py-1 md:py-2"
      >
        &#9664;
      </button>
      <button
        id="nextBtn"
        class="absolute top-1/2 right-4 -translate-y-1/2 md:right-0 bg-white/30 hover:bg-white/50 text-black text-xl md:text-2xl font-bold rounded-sm aspect-square px-2 md:px-4 py-1 md:py-2"
      >
        &#9654;
      </button>
    </div>
  </div>
  <!-- Dots Navigation -->
  <div class="flex justify-center gap-2 mt-4">
    {
      locations.map((_, index) => (
        <button
          class={`w-3 h-3 rounded-full transition ${index === 0 ? "bg-white/50" : "bg-white/30"}`}
          data-index={index}
        />
      ))
    }
  </div>
</Section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const slider = document.getElementById("locationSlider");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const dots = document.querySelectorAll("[data-index]");
    let currentSlide = 0;
    const totalSlides = dots.length;

    function updateSlider() {
      if (slider) {
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      }
      dots.forEach((dot, index) => {
        dot.classList.toggle("bg-white/50", index === currentSlide);
        dot.classList.toggle("bg-white/30", index !== currentSlide);
      });
    }

    if (prevBtn && nextBtn) {
      prevBtn.addEventListener("click", () => {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateSlider();
      });

      nextBtn.addEventListener("click", () => {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
      });
    }

    dots.forEach((dot, index) => {
      dot.addEventListener("click", () => {
        currentSlide = index;
        updateSlider();
      });
    });
  });
</script>
